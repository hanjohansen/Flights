@using Flights.Client.Shared.Game
@using Flights.Domain.State;

<div class="flex flex-col justify-evenly h-[752px]">
    @if(Round.Wildcard != null){
        <Wildcard Player="@Round.Wildcard"/>
    }
    @foreach(var game in Round.Games){
        <GameItem Game="@game"/>
    }
    @if (Round.Games.All(x => x.Started == false)
        && Round.Games.Count > 1
        && Controls.DisplayType == DisplayType.Normal)
    {
        <div class="flex flex-none justify-center">
            <div class="justify-center">
                <div class="flex flex-row items-center rounded-lg p-2 bg-[#919294] dark:bg-[#777777] hover:bg-[#777777] dark:hover:bg-[#919294] cursor-pointer " @onclick="DoReshuffle">
                    <MudIcon Icon="@Icons.Material.Filled.Shuffle" Color="Color.Default" Size="Size.Large"/>
                    <div class="text-2xl text-[#414242] dark:text-[#bcbcbc]">
                        Shuffle
                    </div>
                </div>
            </div>
        </div>
    }
</div>

@code{
    [CascadingParameter]
    public required TournamentControls Controls {get;set;}
    
    [Parameter]
    public required TournamentRoundState Round {get;set;}

    private async Task DoReshuffle()
    {
        if (Controls.ReshuffleLastRound == null)
            return;
        
        await Controls.ReshuffleLastRound();
    }
}    


